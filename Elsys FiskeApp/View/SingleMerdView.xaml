<UserControl x:Class="Elsys_FiskeApp.View.SingleMerdView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:Elsys_FiskeApp.View"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="1200"
             Background="#0D1B2A">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="3*" />
            <RowDefinition Height="1.2*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <!-- Plots -->
        <local:SinglePlotView Grid.Row="0" Grid.Column="0" DataContext="{Binding TrendPlotViewModel}" Margin="5"/>
        <local:SinglePlotView Grid.Row="0" Grid.Column="1" DataContext="{Binding RawPlotViewModel}" Margin="5"/>
        <local:SinglePlotView Grid.Row="0" Grid.Column="2" DataContext="{Binding FourierPlotViewModel}" Margin="5"/>

        <!-- Info Panel -->
        <Border Grid.Row="1" Grid.ColumnSpan="3" Background="#132743" CornerRadius="15" Padding="30" Margin="10">
            <StackPanel Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Center" Width="800" >

                <!-- Status -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0 0 0 15">
                    <TextBlock Text="Connection:" Foreground="White" FontSize="16" Margin="0 0 10 0"/>
                    <TextBlock Text="{Binding ConnectionStatus, UpdateSourceTrigger=PropertyChanged}"  Foreground="LightGreen" FontSize="16" Margin="0 30 40 0"/>
                    <TextBlock Text="Wellbeing:" Foreground="White" FontSize="16" Margin="0 0 10 0"/>
                    <TextBlock Text="{Binding WellbeingStatus}" Foreground="LightBlue" FontSize="16"/>
                </StackPanel>

                <!-- Buttons -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0 0 0 15">
                    <Button Content="Reconnect" Width="130" Margin="10" Command="{Binding ReconnectCommand}" IsEnabled="True" />
                  
                </StackPanel>
                <TextBlock Text="{Binding ActualHydrophonePosition, UpdateSourceTrigger= PropertyChanged}" HorizontalAlignment="Center"
                           Foreground="GreenYellow"/>

                <!-- Position Input -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="Hydrophone Position (X, Y, Z):" Foreground="White" VerticalAlignment="Center" Margin="0 0 10 0"/>
                    <TextBox Text="{Binding HydrophoneX, UpdateSourceTrigger = PropertyChanged}" PreviewTextInput="isInputValidNumber"  Width="50" Margin="5" />
                    <TextBox Text="{Binding HydrophoneY, UpdateSourceTrigger = PropertyChanged}" PreviewTextInput="isInputValidNumber" Width="50" Margin="5" />
                    <TextBox Text="{Binding HydrophoneZ, UpdateSourceTrigger = PropertyChanged}" PreviewTextInput="isInputValidNumber" Width="50" Margin="5" />
                    <Button Content="Apply" Margin="10 0" Command="{Binding ApplyPositionCommand}" />
                </StackPanel>

                <!-- Merd Name -->
                <TextBlock Text="{Binding MerdName}" Foreground="Gray" FontSize="12" HorizontalAlignment="Center" Margin="0 15 0 0"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
